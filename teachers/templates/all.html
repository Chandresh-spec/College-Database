{% extends "layout.html" %}
{% block content %}

<div class="teachers-section">
  <div class="section-header">
    <h2 class="section-title">Our Dedicated Faculty</h2>
    <p class="section-subtitle">Meet the experts guiding your academic journey</p>
  </div>

  <!-- Branch Filter Buttons -->
  <div class="branch-filters">
    <a href="{% url 'Teacher' 'all' %}" 
       data-branch="all"
       class="branch-btn {% if selected_branch == 'all' %}active{% endif %}">All</a>

    {% for course in courses %}
      <a href="{% url 'Teacher' course %}" 
         data-branch="{{ course }}" 
         class="branch-btn {% if selected_branch|lower == course|lower %}active{% endif %}">
         {{ course }}
      </a>
    {% endfor %}
  </div>

  <!-- Teachers Grid -->
  <div class="teachers-grid" id="teachersGrid">
    {% for teacher in teachers %}
      <div class="teacher-card" data-branch="{{ teacher.branch.course_name|default:'Unknown' }}">
        <div class="teacher-photo">
          {% if teacher.t_image %}
            <img src="{{ teacher.t_image.url }}" alt="{{ teacher.t_name }}" class="teacher-img">
          {% else %}
            <i class="fas fa-user-tie"></i>
          {% endif %}
        </div>

        <div class="teacher-info">
          <h3 class="teacher-name">{{ teacher.t_name|default:"Unnamed Teacher" }}</h3>
          <div class="teacher-branch">{{ teacher.branch.course_name|default:"Unknown" }}</div>

          <div class="teacher-details">
            <div class="detail-item">
              <i class="fas fa-graduation-cap"></i>
              <span>{{ teacher.qualification|default:"Not specified" }}</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-book-open"></i>
              <span>{{ teacher.subjects|default:"Not specified" }}</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-briefcase"></i>
              <span>{{ teacher.experience|default:0 }} Years Experience</span>
            </div>
            {% if teacher.address %}
              <div class="detail-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ teacher.address|truncatewords:5 }}</span>
              </div>
            {% endif %}
          </div>

          <p class="teacher-about">{{ teacher.about|default:"No description available."|truncatewords:40 }}</p>
          <span class="read-more" onclick="this.previousElementSibling.style.height='auto'; this.style.display='none';">Read more...</span>
          <a href="{% url 'detail' teacher.pk %}" class="view-more">View More</a>
        </div>
      </div>
    {% empty %}
      <div class="teacher-card empty-card">
        <i class="fas fa-users"></i>
        <p>No teachers available at the moment.</p>
      </div>
    {% endfor %}
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const branchBtns = document.querySelectorAll('.branch-btn');
    const teacherCards = document.querySelectorAll('.teacher-card');

    branchBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        branchBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const selectedBranch = btn.dataset.branch;

        teacherCards.forEach(card => {
          if (selectedBranch === 'all' || card.dataset.branch.toLowerCase() === selectedBranch.toLowerCase()) {
            card.style.display = 'block';
            card.style.animation = 'slideInUp 0.4s ease';
          } else {
            card.style.display = 'none';
          }
        });
      });
    });
});
</script>

{% endblock %}
